--Temporary code snippets that I have to decide about
while true do
  local ok, error = pcall(main)
  if not ok then
    if not system then
	     if shell then
        os.run({["shell"]=shell},shell.getRunningProgram(), "-api")
	     else
	        print("Fatal SimFork error: "..error)
	      	print("Could not load the proper error handler, exiting...")
		    print("You will have to log this manually.")
		    return
	     end
    end
    system.log("Fatal SimFork error! "..error)
    local p
    if error=="Terminated" then
      p="What, you thought you could escape this easily? \nHAHAHAHAHAHAHAHAHA!"
    else
      p = "Sorry, but SimFork has encountered an error and must close.\nThe error is as follows:\n"..error
    end
    if system.drawMenu({"Attempt restart", "Exit to shell"}, p)==2 then
      break
   end
  else
    break
  end
end
