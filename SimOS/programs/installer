if fs.exists("/SimOS/startup/sysUpgrade") then
  print("SimOS already installed, do you want to try to upgrade it?(y/n)")
  local _, key = os.pullEvent("key")
  if key~=keys.y then return end
  shell.run("/"..system.dir.."/startup/sysUpgrade -verbose")
  return
end

if not http then
  print("HTTP not availible! Please enable it in ComputerCraft.cfg or use an alternate install method.")
  return
end
if parallel.waitForAny(function() sleep(4) end, function() if not http.get("http://raw.githubusercontent.com/jlortiz0/CCL-repo/master/SimOS/logo") then sleep(5) end end)==1 then
  print("Could not contact GitHub, are you connected to the Internet?")
end
local function getObject(file)
  write("Getting SimOS/"..file.."...")
  local page = http.get("https://raw.github.com/jlortiz0/CCL-repo/master/SimOS/"..file)
  local fi = fs.open("/SimOS/"..file, "w")
  fi.write(page.readAll())
  fi.close()
  page.close()
  print("Done!")
end

print("Install SimOS on this computer? (y/n)")
local _, key = os.pullEvent("key")
if key~=keys.y then return end

--Add some kind of selector system so you can choose what to install

getObject("SimOS")
getObject("logo")
getObject("registry")
getObject("startup/sysUpgrade")
getObject("programs/apt")
getObject("programs/fileMgr")
getObject("programs/control")
getObject("programs/installer")
print("Run SimOS now? (y/n)")
_, key = os.pullEvent("key")
if key~=keys.y then return end
shell.run("/SimOS/SimOS")
